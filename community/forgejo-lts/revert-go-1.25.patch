From 04b703ffd2a70357925c9d62fab523b4cc41e80d Mon Sep 17 00:00:00 2001
From: Achill Gilgenast <achill@achill.org>
Date: Sun, 26 Oct 2025 12:50:28 +0100
Subject: [PATCH] Revert "Update golang packages to v1.25 (v11.0/forgejo)
 (minor) (#9821)"

This reverts commit e5b73ec69d93d7e3ca0079f943a63e477080fcb3.

Signed-off-by: Achill Gilgenast <achill@achill.org>
---
 Dockerfile                           | 2 +-
 Dockerfile.rootless                  | 2 +-
 Makefile                             | 4 ++--
 go.mod                               | 2 +-
 models/migrations/v1_22/v294_test.go | 3 +--
 5 files changed, 6 insertions(+), 7 deletions(-)

diff --git a/Dockerfile b/Dockerfile
index adf670e3a56b..a97fc741e8a8 100644
--- a/Dockerfile
+++ b/Dockerfile
@@ -1,6 +1,6 @@
 FROM --platform=$BUILDPLATFORM data.forgejo.org/oci/xx AS xx
 
-FROM --platform=$BUILDPLATFORM data.forgejo.org/oci/golang:1.25-alpine3.22 AS build-env
+FROM --platform=$BUILDPLATFORM data.forgejo.org/oci/golang:1.24-alpine3.21 AS build-env
 
 ARG GOPROXY
 ENV GOPROXY=${GOPROXY:-direct}
diff --git a/Dockerfile.rootless b/Dockerfile.rootless
index 642eaf6e291a..e2e8a7b23383 100644
--- a/Dockerfile.rootless
+++ b/Dockerfile.rootless
@@ -1,6 +1,6 @@
 FROM --platform=$BUILDPLATFORM data.forgejo.org/oci/xx AS xx
 
-FROM --platform=$BUILDPLATFORM data.forgejo.org/oci/golang:1.25-alpine3.22 AS build-env
+FROM --platform=$BUILDPLATFORM data.forgejo.org/oci/golang:1.24-alpine3.21 AS build-env
 
 ARG GOPROXY
 ENV GOPROXY=${GOPROXY:-direct}
diff --git a/Makefile b/Makefile
index aed427272a97..80cb00f22dcc 100644
--- a/Makefile
+++ b/Makefile
@@ -42,13 +42,13 @@ GOFUMPT_PACKAGE ?= mvdan.cc/gofumpt@v0.7.0 # renovate: datasource=go
 GOLANGCI_LINT_PACKAGE ?= github.com/golangci/golangci-lint/cmd/golangci-lint@v1.64.7 # renovate: datasource=go
 GXZ_PACKAGE ?= github.com/ulikunitz/xz/cmd/gxz@v0.5.11 # renovate: datasource=go
 MISSPELL_PACKAGE ?= github.com/golangci/misspell/cmd/misspell@v0.6.0 # renovate: datasource=go
-SWAGGER_PACKAGE ?= github.com/go-swagger/go-swagger/cmd/swagger@v0.33.1 # renovate: datasource=go
+SWAGGER_PACKAGE ?= github.com/go-swagger/go-swagger/cmd/swagger@v0.31.0 # renovate: datasource=go
 XGO_PACKAGE ?= src.techknowlogick.com/xgo@latest
 GO_LICENSES_PACKAGE ?= github.com/google/go-licenses@v1.6.0 # renovate: datasource=go
 GOVULNCHECK_PACKAGE ?= golang.org/x/vuln/cmd/govulncheck@v1 # renovate: datasource=go
 DEADCODE_PACKAGE ?= golang.org/x/tools/cmd/deadcode@v0.31.0 # renovate: datasource=go
 GOMOCK_PACKAGE ?= go.uber.org/mock/mockgen@v0.4.0 # renovate: datasource=go
-GOPLS_PACKAGE ?= golang.org/x/tools/gopls@v0.20.0 # renovate: datasource=go
+GOPLS_PACKAGE ?= golang.org/x/tools/gopls@v0.18.1 # renovate: datasource=go
 RENOVATE_NPM_PACKAGE ?= renovate@39.212.0 # renovate: datasource=docker packageName=data.forgejo.org/renovate/renovate
 
 # https://github.com/disposable-email-domains/disposable-email-domains/commits/main/
diff --git a/go.mod b/go.mod
index a9ea458794c9..f5430301f86e 100644
--- a/go.mod
+++ b/go.mod
@@ -2,7 +2,7 @@ module forgejo.org
 
 go 1.25.0
 
-toolchain go1.25.3
+toolchain go1.24.6
 
 require (
 	code.forgejo.org/f3/gof3/v3 v3.10.6
diff --git a/models/migrations/v1_22/v294_test.go b/models/migrations/v1_22/v294_test.go
index 9d2433f7cdba..ef7b67ca5b40 100644
--- a/models/migrations/v1_22/v294_test.go
+++ b/models/migrations/v1_22/v294_test.go
@@ -45,8 +45,7 @@ func Test_AddUniqueIndexForProjectIssue(t *testing.T) {
 	for _, index := range tables[0].Indexes {
 		if index.Type == schemas.UniqueType {
 			found = true
-			slices.Sort(index.Cols)
-			assert.Equal(t, []string{"issue_id", "project_id"}, index.Cols)
+			slices.Equal(index.Cols, []string{"project_id", "issue_id"})
 			break
 		}
 	}
-- 
2.51.1
--
From fc0adf4348b31d415ac4c19ee1a923ecc5a91498 Mon Sep 17 00:00:00 2001
From: Achill Gilgenast <achill@achill.org>
Date: Sun, 26 Oct 2025 12:58:46 +0100
Subject: [PATCH] Revert "[v11.0/forgejo] chore: update go target language
 version to v1.25.0 (#9828)"

This reverts commit 9074bf666c30a2781081fc9118987e263ff246f0.

Signed-off-by: Achill Gilgenast <achill@achill.org>
---
 go.mod | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/go.mod b/go.mod
index f5430301f86e..f38cbc837848 100644
--- a/go.mod
+++ b/go.mod
@@ -1,6 +1,6 @@
 module forgejo.org
 
-go 1.25.0
+go 1.24
 
 toolchain go1.24.6
 
-- 
2.51.1
