# Contributor: Kevin Daudt <kdaudt@alpinelinux.org>
# Maintainer: Kevin Daudt <kdaudt@alpinelinux.org>
pkgname=zabbix-agent2-plugin-alpine
pkgver=0.4.0
pkgrel=0
pkgdesc="Alpine related plugins for Zabbix Agent 2"
url="https://gitlab.alpinelinux.org/alpine/infra/zabbix-agent2-plugins"
arch="all"
license="MIT"
depends="zabbix-agent2"
makedepends="go"
source="https://gitlab.alpinelinux.org/alpine/infra/zabbix-agent2-plugins/-/archive/v$pkgver/zabbix-agent2-plugins-v$pkgver.tar.gz"
options="!check" # no test suite
builddir="$srcdir/zabbix-agent2-plugins-v$pkgver"
provides="zabbix-agent2-alpine=$pkgver-r$pkgrel"

build() {
	go build ./cmd/zabbix-agent2-plugin-alpine.go
}

package() {
	install -Dm0755 zabbix-agent2-plugin-alpine -t "$pkgdir"/usr/libexec
	install -Dm0644 config/alpine.conf \
		-t "$pkgdir"/etc/zabbix/zabbix_agent2.d/plugins.d/
}

sha512sums="
b7e456634273a2d779683b16a1b6df2559a81e10dd2c30b3341649bb8ca5a57cfef604e59261fdda067121dd93ee6f97f5aa86ee18230adb9b20238f7e92e864  zabbix-agent2-plugins-v0.4.0.tar.gz
"
